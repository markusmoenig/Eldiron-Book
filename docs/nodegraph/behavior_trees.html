<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Behavior Trees - Eldiron Book (WiP)</title>


        <!-- Custom HTML head -->
        
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href=".././mdbook-admonish.css">

    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../introduction.html">Introduction</a></li><li class="chapter-item expanded affix "><li class="part-title">Eldiron Creator</li><li class="chapter-item expanded "><a href="../installation.html"><strong aria-hidden="true">1.</strong> Installation</a></li><li class="chapter-item expanded "><a href="../projects.html"><strong aria-hidden="true">2.</strong> Project Layout</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../projects/assets.html"><strong aria-hidden="true">2.1.</strong> Assets Directory</a></li><li class="chapter-item expanded "><a href="../projects/game.html"><strong aria-hidden="true">2.2.</strong> Game Directory</a></li></ol></li><li class="chapter-item expanded "><a href="../nodegraph/nodegraph.html"><strong aria-hidden="true">3.</strong> Node Graphs & Scripting </a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../nodegraph/behavior_trees.html" class="active"><strong aria-hidden="true">3.1.</strong> Behavior Trees</a></li><li class="chapter-item expanded "><a href="../nodegraph/control_flow.html"><strong aria-hidden="true">3.2.</strong> Control Flow</a></li><li class="chapter-item expanded "><a href="../nodegraph/scripting.html"><strong aria-hidden="true">3.3.</strong> Scripting</a></li><li class="chapter-item expanded "><a href="../nodegraph/mechanics.html"><strong aria-hidden="true">3.4.</strong> Mechanics</a></li></ol></li><li class="chapter-item expanded "><a href="../ui_creator.html"><strong aria-hidden="true">4.</strong> User Interface</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../assets.html"><strong aria-hidden="true">4.1.</strong> Assets View</a></li><li class="chapter-item expanded "><a href="../regions.html"><strong aria-hidden="true">4.2.</strong> Regions View</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../regions_drawing_tiles.html"><strong aria-hidden="true">4.2.1.</strong> Drawing Tiles</a></li><li class="chapter-item expanded "><a href="../regions_edit_areas.html"><strong aria-hidden="true">4.2.2.</strong> Edit Areas</a></li><li class="chapter-item expanded "><a href="../regions_characters.html"><strong aria-hidden="true">4.2.3.</strong> Characters</a></li><li class="chapter-item expanded "><a href="../regions_settings.html"><strong aria-hidden="true">4.2.4.</strong> Settings</a></li></ol></li><li class="chapter-item expanded "><a href="../characters.html"><strong aria-hidden="true">4.3.</strong> Characters View</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../characters_npc.html"><strong aria-hidden="true">4.3.1.</strong> NPCs</a></li><li class="chapter-item expanded "><a href="../characters_player.html"><strong aria-hidden="true">4.3.2.</strong> Player</a></li></ol></li><li class="chapter-item expanded "><a href="../systems.html"><strong aria-hidden="true">4.4.</strong> Systems View</a></li><li class="chapter-item expanded "><a href="../items.html"><strong aria-hidden="true">4.5.</strong> Items View</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../item_state.html"><strong aria-hidden="true">4.5.1.</strong> State</a></li><li class="chapter-item expanded "><a href="../item_settings.html"><strong aria-hidden="true">4.5.2.</strong> Settings</a></li></ol></li><li class="chapter-item expanded "><a href="../game.html"><strong aria-hidden="true">4.6.</strong> Game View</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../game_settings.html"><strong aria-hidden="true">4.6.1.</strong> Settings</a></li></ol></li></ol></li><li class="chapter-item expanded "><li class="part-title">Reference</li><li class="chapter-item expanded "><a href="../scripting/scripting.html"><strong aria-hidden="true">5.</strong> Scripting</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../scripting/screen_scripts.html"><strong aria-hidden="true">5.1.</strong> Screen Scripts</a></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">6.</strong> Nodes</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">6.1.</strong> Control Flow</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="../nodes/behavior_tree.html"><strong aria-hidden="true">6.1.1.</strong> Behavior Tree</a></li><li class="chapter-item expanded "><a href="../nodes/expression.html"><strong aria-hidden="true">6.1.2.</strong> Expression</a></li><li class="chapter-item expanded "><a href="../nodes/has_target.html"><strong aria-hidden="true">6.1.3.</strong> Has Target</a></li><li class="chapter-item expanded "><a href="../nodes/light.html"><strong aria-hidden="true">6.1.4.</strong> Linear</a></li><li class="chapter-item expanded "><a href="../nodes/sequence.html"><strong aria-hidden="true">6.1.5.</strong> Sequence</a></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">6.2.</strong> Action</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="../nodes/audio.html"><strong aria-hidden="true">6.2.1.</strong> Audio</a></li><li class="chapter-item expanded "><a href="../nodes/call_behavior.html"><strong aria-hidden="true">6.2.2.</strong> Call Behavior</a></li><li class="chapter-item expanded "><a href="../nodes/call_system.html"><strong aria-hidden="true">6.2.3.</strong> Call System</a></li><li class="chapter-item expanded "><a href="../nodes/close_in.html"><strong aria-hidden="true">6.2.4.</strong> Close In</a></li><li class="chapter-item expanded "><a href="../nodes/deal_damage.html"><strong aria-hidden="true">6.2.5.</strong> Deal Damage</a></li><li class="chapter-item expanded "><a href="../nodes/drop_inventory.html"><strong aria-hidden="true">6.2.6.</strong> Drop Inventory</a></li><li class="chapter-item expanded "><a href="../nodes/effect.html"><strong aria-hidden="true">6.2.7.</strong> Effect</a></li><li class="chapter-item expanded "><a href="../nodes/heal.html"><strong aria-hidden="true">6.2.8.</strong> Heal</a></li><li class="chapter-item expanded "><a href="../nodes/light.html"><strong aria-hidden="true">6.2.9.</strong> Light</a></li><li class="chapter-item expanded "><a href="../nodes/lock_tree.html"><strong aria-hidden="true">6.2.10.</strong> Lock Tree</a></li><li class="chapter-item expanded "><a href="../nodes/lookout.html"><strong aria-hidden="true">6.2.11.</strong> Lookout</a></li><li class="chapter-item expanded "><a href="../nodes/message.html"><strong aria-hidden="true">6.2.12.</strong> Message</a></li><li class="chapter-item expanded "><a href="../nodes/multi_choice.html"><strong aria-hidden="true">6.2.13.</strong> Multi Choice</a></li><li class="chapter-item expanded "><a href="../nodes/pathfinder.html"><strong aria-hidden="true">6.2.14.</strong> Pathfinder</a></li><li class="chapter-item expanded "><a href="../nodes/random_walk.html"><strong aria-hidden="true">6.2.15.</strong> Random Walk</a></li><li class="chapter-item expanded "><a href="../nodes/respawn.html"><strong aria-hidden="true">6.2.16.</strong> Respawn</a></li><li class="chapter-item expanded "><a href="../nodes/screen.html"><strong aria-hidden="true">6.2.17.</strong> Screen</a></li><li class="chapter-item expanded "><a href="../nodes/script.html"><strong aria-hidden="true">6.2.18.</strong> Script</a></li><li class="chapter-item expanded "><a href="../nodes/sell.html"><strong aria-hidden="true">6.2.19.</strong> Sell</a></li><li class="chapter-item expanded "><a href="../nodes/set_state.html"><strong aria-hidden="true">6.2.20.</strong> Set State</a></li><li class="chapter-item expanded "><a href="../nodes/set_tile.html"><strong aria-hidden="true">6.2.21.</strong> Set Tile</a></li><li class="chapter-item expanded "><a href="../nodes/take_damage.html"><strong aria-hidden="true">6.2.22.</strong> Take Damage</a></li><li class="chapter-item expanded "><a href="../nodes/take_heal.html"><strong aria-hidden="true">6.2.23.</strong> Take Heal</a></li><li class="chapter-item expanded "><a href="../nodes/target.html"><strong aria-hidden="true">6.2.24.</strong> Target</a></li><li class="chapter-item expanded "><a href="../nodes/teleport.html"><strong aria-hidden="true">6.2.25.</strong> Teleport</a></li><li class="chapter-item expanded "><a href="../nodes/unlock_tree.html"><strong aria-hidden="true">6.2.26.</strong> Unlock Tree</a></li><li class="chapter-item expanded "><a href="../nodes/untarget.html"><strong aria-hidden="true">6.2.27.</strong> Untarget</a></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">6.3.</strong> Area Specific</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="../nodes/always.html"><strong aria-hidden="true">6.3.1.</strong> Always</a></li><li class="chapter-item expanded "><a href="../nodes/action.html"><strong aria-hidden="true">6.3.2.</strong> Enter Area</a></li><li class="chapter-item expanded "><a href="../nodes/inside_area.html"><strong aria-hidden="true">6.3.3.</strong> Inside Area</a></li><li class="chapter-item expanded "><a href="../nodes/leave_area.html"><strong aria-hidden="true">6.3.4.</strong> Leave Area</a></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">6.4.</strong> Player Specific</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="../nodes/action.html"><strong aria-hidden="true">6.4.1.</strong> Action</a></li><li class="chapter-item expanded "><a href="../nodes/drop.html"><strong aria-hidden="true">6.4.2.</strong> Drop</a></li><li class="chapter-item expanded "><a href="../nodes/move.html"><strong aria-hidden="true">6.4.3.</strong> Move</a></li><li class="chapter-item expanded "><a href="../nodes/take.html"><strong aria-hidden="true">6.4.4.</strong> Take</a></li></ol></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Eldiron Book (WiP)</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="behavior-trees"><a class="header" href="#behavior-trees">Behavior Trees</a></h1>
<p>Every node graph in Eldiron (except <a href="./regions_edit_areas.html">area nodes</a> which are a bit more simple) utilizes behavior trees to break up the overall behavior into smaller, easily understandable chunks (trees).</p>
<p>A behavior tree is just a node with several terminals at the bottom which get executed from left to right. You typically rename the behavior tree to indicate what behavior the tree is executing, for example <em>Go Raiding</em>, or <em>Talk</em> and <em>Combat</em>.</p>
<p>In a programming language behavior trees would be similar to functions.</p>
<p>Every behavior tree node has an <em>Execute</em> property which indicates when the tree is executed:</p>
<ul>
<li><strong>Always</strong>. The behavior tree is always executed if the graph is not locked.</li>
<li><strong>On Startup</strong>. The behavior tree is only executed once when the graph is created.</li>
<li><strong>On Demand</strong>. The behavior tree is executed on demand.</li>
</ul>
<p>Behavior trees perform the AI for non-player-characters (NPCs) and connect input commands from the <em>Player</em> character to the right player action (see the <a href="./characters.html">characters section</a>).</p>
<p>All behavior trees in a graph are listed as tabs at the top of the graph. Select the given behavior to edit it.</p>
<h2 id="active-vs-passive"><a class="header" href="#active-vs-passive">Active vs. Passive</a></h2>
<p>There are some behavior trees which have a passive behavior and need to end with an &quot; (P)&quot;. For example lets assume you have a healer character named Antony. When your player performs a custom action in a given direction Eldirons node system checks if the character (or item) located in the given direction has a behavior node tree called <em>&quot;ActionName (P)&quot;</em>. For example lets say the player looks towards Antony and you want to send a message to the player: Create a new behavior tree for Antony (by dragging a <a href="../nodes/behavior_tree.html">Behavior Tree</a>) node into the graph. Rename the node to &quot;Look (P)&quot; and attach a <a href="../nodes/message.html">Message</a> node to it with a status message like &quot;You see Antony, a famous healer.&quot;. Make sure that the behavior tree is set to execute &quot;On Demand&quot;.</p>
<p>One big difference between passive behavior trees and normal ones is that passive behavior trees use the context of the caller instead of their own. You do not want to send the message to Antony but to the player who is looking in his direction. Thats why the convention with the naming is important to mark this difference.</p>
<div id="admonition-tip" class="admonition tip">
<div class="admonition-title">
<p>Tip</p>
<p><a class="admonition-anchor-link" href="#admonition-tip"></a></p>
</div>
<div>
<p>The same <em>look</em> behavior is also possible with area nodes by utilizing the <a href="../nodes/action.html">Action</a> node. For example if you look at a sign and send want to send a message to the player. For more information about area nodes see <a href="../regions_edit_areas.html">the edit areas section</a>.</p>
</div>
</div>
<h2 id="behavior-trees-vs-system-trees"><a class="header" href="#behavior-trees-vs-system-trees">Behavior Trees vs System Trees</a></h2>
<p>Creating behavior trees for characters is fine. But if you want to implement general systems like crafting or magic you do not want to implement them again and again for every player character in the game. This is where system trees come into play. Go to the <a href="../systems.html">systems view</a> and create behavior trees for a given system like you would for characters. Now in your characters you can call these trees with the <a href="../nodes/call_system.html">Call System</a> node. They execute the same way as would your local trees with the same character context. This way you can create re-usable systems for your game.</p>
<div id="admonition-tip-1" class="admonition tip">
<div class="admonition-title">
<p>Tip</p>
<p><a class="admonition-anchor-link" href="#admonition-tip-1"></a></p>
</div>
<div>
<p>To create a new behavior tree just drag and drop a <em>Behavior Tree</em> node item into the node graph.</p>
</div>
</div>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../nodegraph/nodegraph.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="../nodegraph/control_flow.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../nodegraph/nodegraph.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="../nodegraph/control_flow.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script type="text/javascript">
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>

        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->


    </body>
</html>
